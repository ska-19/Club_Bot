{% extends "main_base.html" %}


{% block club_name %}
<a href="/pages/club_user/{{user_info.id}}" style="text-decoration: none; color: #000000">
    <div class="logo-container">
        <span class="site-name">{{ club_info.name }}</span>
    </div>
</a>
{% endblock %}


{% block exp_club %}
{{ club_info.xp }}
{% endblock %}


{% block user_status %}
<a href="/pages/profile_user/{{user_info.id}}" style="text-decoration: none">
    <button class="Btn" style="height: 60px; width: 160px; justify-content: center">
        <h1 style="bottom: 7px;font-size: 14px; position: relative; z-index: 2">
            {{ user_info.surname }}</h1>
        <h1 style="bottom: 7px; font-size: 10px; position: relative; z-index: 2">
            {{ user_x_club_info.role }}</h1>
    </button>
</a>
{% endblock %}


{% block clubs %}
<!--позже будет окно с различными клубами "Сменить клуб"-->
{% endblock %}


{% block money %}
{{ user_x_club_info.balance }}
{% endblock %}


{% block content %}
{% for event in events %}
<!--события-->
<div class="form-container" style="margin-top: 30px">
    <form class="form" id="form">
        <h1 id="Name_{{event.id}}" style="font-size: 15px;position: relative; z-index: 2">{{ event.name }}</h1>
        <div style="display: flex">
            <div class="form-group" style="width: 60%">
                <label for="Date_{{event.id}}">Дата</label>
                <input required="" name="Date" id="Date_{{event.id}}" type="text" style="width: 115px"
                       value="{{event.date}}" readonly>
            </div>
            <div class="form-group">
                <label for="Speaker_{{event.id}}">Спикер</label>
                <input required="" name="Speaker" id="Speaker_{{event.id}}" type="text" style="width: 125px"
                       value="{{event.speaker}}"
                       readonly>
            </div>
        </div>
        <div class="form-group">
            <label for="textarea_{{event.id}}">О событии</label>
            <textarea required="" cols="50" rows="10" id="textarea_{{event.id}}" name="textarea"
                      style="width: 280px; height: 80px" readonly>{{ event.sinopsis }}</textarea>
        </div>
        {% if user_x_club_info.role == "member" %}


        <!-- У участников только кнопка для участия в событии -->
        {% if event.reg == true %}
        <button type="button" class="DisregEvent" id="DisregEvent_{{ event.id }}" onclick="Disreg('{{event.id}}')">Не
            участвовать
        </button>
        <button type="button" class="RegEvent" id="RegEvent_{{ event.id }}" style="display: none"
                onclick="Reg('{{event.id}}')">Участвовать
        </button>
        {% else %}
        <button type="button" class="RegEvent" id="RegEvent_{{ event.id }}" onclick="Reg('{{event.id}}')">
            Участвовать
        </button>
        <button type="button" class="DisregEvent" id="DisregEvent_{{ event.id }}" style="display: none"
                onclick="Disreg('{{event.id}}')">Не участвовать
        </button>
        {% endif %}


        {% else %}
        <!-- У админов/владельца кнопки для редактирования и завершения события -->
        <div style="display: flex; justify-content: center">
            <!-- "Изменить" -->
            <div class="block5" style="width: 50%; text-align: center">
                <button type="button" class="EditEvent" id="EditEvent_{{ event.id }}"
                        onclick="Edit('{{event.id}}')">Изменить
                </button>
                <button type="button" class="SaveEvent" id="SaveEvent_{{ event.id }}" style="display: none"
                        onclick="Save('{{event.id}}')">Сохранить
                </button>
            </div>
            <!-- "Завершить событие" -->
            <div class="block6" style="width: 50%; text-align: center;">
                <button type="button" class="EndEvent" id="EndEvent_{{ event.id }}"
                        onclick="End('{{event.id}}')">Завершить
                </button>
            </div>
        </div>
        {% endif %}
    </form>
</div>
{% endfor %}
{% endblock %}
